---
title: "数値計算"
date: 2021-01-20T02:36:44+09:00
tags: ["勉強ノート", "数値計算"]
---

<!-- TODO 整数について書く -->
<!-- TODO 2 の補数について書く -->
<!-- TODO オーバーフロー, アンダーフローについて書く -->

## 浮動小数点数の構造

浮動小数点数では以下に示すデータで数値を表現する。

- 符号
- 指数 (exponent)
- 仮数 (significand)
- 基数 (base)

小数の絶対値は以下の式で表される。

$$数値の絶対値=仮数\times 基数^{指数}$$

#### IEEE 754

IEEE 標準のひとつである IEEE 754 (IEEE Standard for Floating-Point Arithmetic) で定められている浮動小数点数の方式を以下に示す。

半精度浮動小数点数
: 基数は 2 に固定, 1 ビットの符号部, 5 ビットの指数部, 10 ビットの仮数部をもつ (計 16 bits = 2 bytes)
: 指数部には 15 のゲタを履かせた数値で表す

単精度浮動小数点数 (float)
: 基数は 2 に固定, 1 ビットの符号部, 8 ビットの指数部, 23 ビットの仮数部 (計 32 bits = 4 bytes)
: 指数部には 127 のゲタを履かせた数値で表す

倍精度浮動小数点数 (double)
: 基数は 2 に固定, 1 ビットの符号部, 11 ビットの指数部, 52 ビットの仮数部 (計 64 bits = 8 bytes)
: 指数には 1023 のゲタを履かせた数値で表す

## 任意精度演算

任意精度演算とは、数値の精度をいくらでも伸ばせるような演算システム (またはデータ構造) のことをいう。

有名な任意精度演算をサポートするライブラリとして、Java の `BigInteger` (整数), `BigDecimal` などがある。

* [BigInteger (Java SE8)](https://docs.oracle.com/javase/jp/8/docs/api/java/math/BigInteger.html)
* [BigDecimal (Java SE8)](https://docs.oracle.com/javase/jp/8/docs/api/java/math/BigDecimal.html)

## Rump の例題

$$f(a,b)=333.75b^6+a^2(11a^2b^2-b^6-121b^4-2)+5.5b^8+\frac{a}{2b}$$

 以上で示した関数において、 $a=77617.0,b=33096.0$ を与えて $f(a,b)$ を計算する。

- 単精度浮動小数点で計算すると $f(a,b)\sim1.172603\dots$ が得られる。
- 倍精度浮動小数点で計算すると $f(a,b)\sim1.1726039400531\dots$ が得られる。
- 真の値は $f(a,b)=-0.82739605\dots$ である。

Rump の例題はこのように **「ある演算精度での計算結果とそれよりも高い演算精度での計算結果を比較したときに、双方の値が近ければ、その値はある程度は正しい。」という直感に対する反例**である。

## 誤差 (error)

### 丸め誤差 (rounding error)

数値のどこかの桁で切り上げ・切り捨てなど端数処理を行った場合に生じる誤差。

### 打ち切り誤差 (truncation error)

反復計算において、必要とされる回数より少ない回数で反復を止める (打ち切り) によって生じる誤差。

### 情報落ち (loss of trailing digits)

精度が限られている条件下で、絶対値の大きい数と絶対値の小さい数を加減算したときに、絶対値の小さい数が無視されてしまう現象。

### 桁落ち (cancellation)

値がほぼ等しく、丸め誤差をもつ数値同士の減算したときに、有効数字が減る現象。

## 精度保証付き数値計算

精度保証付き数値計算とは、数学的に厳密な誤差の評価を伴う数値計算のことをいう。

## 参考文献

- Wikipedia, [浮動小数点数](https://ja.wikipedia.org/wiki/%E6%B5%AE%E5%8B%95%E5%B0%8F%E6%95%B0%E7%82%B9%E6%95%B0)
- Wikipedia, [数値解析](https://ja.wikipedia.org/wiki/%E6%95%B0%E5%80%A4%E8%A7%A3%E6%9E%90)
- Wikipedia, [誤差](https://ja.wikipedia.org/wiki/%E8%AA%A4%E5%B7%AE)
